<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trinity | Finansal Grafik Platformu</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Kütüphane yükleme kontrolü
    window.addEventListener('DOMContentLoaded', function() {
      console.log('DOM yüklendi');
      if (window.Chart) {
        console.log('Chart.js başarıyla yüklendi');
      } else {
        console.error('Chart.js yüklenemedi!');
      }
      
      // Debug Mode: Eklenmiş test fonksiyonları
      window.debugToggleWatchlist = function() {
        const rightSidebar = document.querySelector('.right-sidebar');
        if (rightSidebar) {
          console.log('Manual toggle watchlist called');
          rightSidebar.classList.toggle('collapsed');
          console.log('Right sidebar collapsed:', rightSidebar.classList.contains('collapsed'));
        } else {
          console.error('Right sidebar not found');
        }
      };
      
      // Debug: Sol kol butonuna manuel event listener ekle
      const leftToggle = document.querySelector('.sidebar-toggle.left-toggle');
      if (leftToggle) {
        console.log('Found left toggle button, adding direct click handler');
        leftToggle.addEventListener('click', function() {
          console.log('Left toggle clicked from inline handler');
          window.debugToggleWatchlist();
        });
      } else {
        console.error('Left toggle button not found');
      }
    });
  </script>
</head>
<body class="dark-theme">

  <!-- Üst Menü -->
  <header class="main-header">
    <div class="logo">
      <img src="img/logo.png" alt="Trinity Logo" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'><rect width=\'100\' height=\'100\' fill=\'%232962FF\'/><text x=\'50\' y=\'65\' font-size=\'50\' text-anchor=\'middle\' fill=\'white\' font-family=\'Arial\'>T</text></svg>'">
      <span>Trinity</span>
    </div>
    
    <!-- Ana Navigasyon Menüsü -->
    <nav class="main-nav-menu">
      <ul>
        <li><a href="#summary" class="nav-link active">Summary</a></li>
        <li><a href="#markets" class="nav-link">Markets</a></li>
        <li><a href="#community" class="nav-link">Community</a></li>
        <li><a href="#tools" class="nav-link">Araçlar</a></li>
        <li><a href="#news" class="nav-link">News</a></li>
        <li class="search-container">
          <div class="search-bar">
            <input type="text" id="symbolSearch" placeholder="Sembol ara..." data-i18n="[placeholder]header.search">
            <button><i class="fas fa-search"></i></button>
          </div>
        </li>
      </ul>
    </nav>
    
    <!-- Sağ Üst Menü - Giriş ve Ayarlar -->
    <div class="user-nav">
      <ul>
        <li><a href="#" id="loginBtn"><i class="fas fa-user"></i> Giriş Yap</a></li>
        <li><a href="#" id="settingsBtn"><i class="fas fa-cog"></i></a></li>
        <li>
          <select id="languageSelector">
            <option value="tr">Türkçe</option>
            <option value="en">English</option>
          </select>
        </li>
      </ul>
    </div>
  </header>

  <!-- Ana İçerik -->
  <main class="main-content">
    <!-- Sol Kenar Çubuğu - Araçlar -->
    <aside class="sidebar left-sidebar collapsed">
      <div class="tools-container">
        <div class="tool-group">
          <button class="tool-item" title="Belge">
            <i class="fas fa-file-alt"></i>
          </button>
          <button class="tool-item" title="Saat">
            <i class="fas fa-clock"></i>
          </button>
          <button class="tool-item" title="Mesaj">
            <i class="fas fa-comment-alt"></i>
          </button>
          <div class="tool-divider"></div>
          <button class="tool-item" title="Hedef">
            <i class="fas fa-bullseye"></i>
          </button>
          <button class="tool-item" title="Takvim">
            <i class="fas fa-calendar-alt"></i>
          </button>
          <button class="tool-item" title="Analiz">
            <i class="fas fa-chart-line"></i>
          </button>
          <div class="tool-divider"></div>
          <button class="tool-item" title="RSS">
            <i class="fas fa-rss"></i>
          </button>
          <button class="tool-item" title="Bildirimler">
            <i class="fas fa-bell"></i>
          </button>
          <button class="tool-item" title="Yardım">
            <i class="fas fa-question-circle"></i>
          </button>
        </div>
      </div>
    </aside>

    <!-- Grafik ve Araçlar Ana Bölümü -->
    <section class="chart-container" id="marketSummary">
      <!-- Başlık ve Kategori Bölümü -->
      <div class="summary-header">
        <h2>Piyasa Özeti</h2>
        <div class="summary-categories">
          <button class="summary-category active" data-target="indeksler">İndeksler</button>
          <button class="summary-category" data-target="hisseler">Hisseler</button>
          <button class="summary-category" data-target="community">Community Ideas</button>
          <button class="summary-category" data-target="kripto">Kripto</button>
          <button class="summary-category" data-target="etf">ETF</button>
        </div>
      </div>
      
      <!-- 1. İndeksler Özeti Bölümü -->
      <div class="summary-section indeksler-section">
        <h3 class="section-title">Popüler İndeksler</h3>
        <!-- Market Indices moved to here -->
        <div class="market-indices">
          <div class="market-index" data-index="sp500">
            <div class="index-badge">
              <div class="badge-circle sp500">500</div>
            </div>
            <div class="index-details">
              <div class="index-name">S&P 500</div>
              <div class="index-price">5,844.20 <span class="price-unit">USD</span></div>
              <div class="index-change up">+3.26%</div>
            </div>
          </div>
          
          <div class="market-index" data-index="nasdaq">
            <div class="index-badge">
              <div class="badge-circle nasdaq">100</div>
            </div>
            <div class="index-details">
              <div class="index-name">Nasdaq 100</div>
              <div class="index-price">20,868.15 <span class="price-unit">USD</span></div>
              <div class="index-change up">+4.02%</div>
            </div>
          </div>
          
          <div class="market-index" data-index="dow">
            <div class="index-badge">
              <div class="badge-circle dow">30</div>
            </div>
            <div class="index-details">
              <div class="index-name">Dow 30</div>
              <div class="index-price">42,410.11 <span class="price-unit">USD</span></div>
              <div class="index-change up">+2.81%</div>
            </div>
          </div>
          
          <div class="market-index" data-index="japan">
            <div class="index-badge">
              <div class="badge-circle japan">225</div>
            </div>
            <div class="index-details">
              <div class="index-name">Japan 225</div>
              <div class="index-price">38,183.04 <span class="price-unit">JPY</span></div>
              <div class="index-change up">+1.43%</div>
            </div>
          </div>
          
          <div class="market-index" data-index="ftse">
            <div class="index-badge">
              <div class="badge-circle ftse">100</div>
            </div>
            <div class="index-details">
              <div class="index-name">FTSE 100</div>
              <div class="index-price">8,602.92 <span class="price-unit">GBP</span></div>
              <div class="index-change down">-0.02%</div>
            </div>
          </div>
        </div>
        
        <!-- Ana İndeks Grafiği -->
        <div id="chart-container" class="chart">
          <canvas id="chart"></canvas>
        </div>
        <div class="chart-timeframe-buttons">
          <button class="chart-time-btn active" data-chart="main" data-timeframe="1D">1D</button>
          <button class="chart-time-btn" data-chart="main" data-timeframe="1W">1M</button>
          <button class="chart-time-btn" data-chart="main" data-timeframe="1M">3M</button>
          <button class="chart-time-btn" data-chart="main" data-timeframe="3M">1Y</button>
          <button class="chart-time-btn" data-chart="main" data-timeframe="1Y">5Y</button>
          <button class="chart-time-btn" data-chart="main" data-timeframe="ALL">All</button>
        </div>
      </div>
      
      <!-- 2. Hisseler Özeti Bölümü -->
      <div class="summary-section hisseler-section" style="display: none;">
        <h3 class="section-title">Popüler Hisseler</h3>
        <div class="stocks-grid">
          <div class="stock-card">
            <div class="stock-header">
              <div class="stock-logo">AAPL</div>
              <div class="stock-name">Apple Inc.</div>
            </div>
            <div class="stock-price">$210.35</div>
            <div class="stock-change up">+2.15%</div>
            <div class="stock-chart">
              <canvas class="mini-chart" data-symbol="AAPL"></canvas>
            </div>
          </div>
          
          <div class="stock-card">
            <div class="stock-header">
              <div class="stock-logo">MSFT</div>
              <div class="stock-name">Microsoft Corp.</div>
            </div>
            <div class="stock-price">$354.97</div>
            <div class="stock-change up">+1.14%</div>
            <div class="stock-chart">
              <canvas class="mini-chart" data-symbol="MSFT"></canvas>
            </div>
          </div>
          
          <div class="stock-card">
            <div class="stock-header">
              <div class="stock-logo">TSLA</div>
              <div class="stock-name">Tesla Inc.</div>
            </div>
            <div class="stock-price">$238.89</div>
            <div class="stock-change up">+3.42%</div>
            <div class="stock-chart">
              <canvas class="mini-chart" data-symbol="TSLA"></canvas>
            </div>
          </div>
          
          <div class="stock-card">
            <div class="stock-header">
              <div class="stock-logo">AMZN</div>
              <div class="stock-name">Amazon.com Inc.</div>
            </div>
            <div class="stock-price">$183.43</div>
            <div class="stock-change down">-0.37%</div>
            <div class="stock-chart">
              <canvas class="mini-chart" data-symbol="AMZN"></canvas>
            </div>
          </div>
          
          <div class="stock-card">
            <div class="stock-header">
              <div class="stock-logo">GOOGL</div>
              <div class="stock-name">Alphabet Inc.</div>
            </div>
            <div class="stock-price">$152.19</div>
            <div class="stock-change down">-0.22%</div>
            <div class="stock-chart">
              <canvas class="mini-chart" data-symbol="GOOGL"></canvas>
            </div>
          </div>
          
          <div class="stock-card">
            <div class="stock-header">
              <div class="stock-logo">META</div>
              <div class="stock-name">Meta Platforms Inc.</div>
            </div>
            <div class="stock-price">$517.58</div>
            <div class="stock-change up">+0.83%</div>
            <div class="stock-chart">
              <canvas class="mini-chart" data-symbol="META"></canvas>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 3. Community Ideas Bölümü -->
      <div class="summary-section community-section" style="display: none;">
        <h3 class="section-title">Community Ideas</h3>
        <div class="community-ideas">
          <div class="idea-card">
            <div class="idea-header">
              <img src="img/avatar1.jpg" alt="User Avatar" class="idea-avatar" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'><rect width=\'100\' height=\'100\' fill=\'%232962FF\'/><text x=\'50\' y=\'65\' font-size=\'50\' text-anchor=\'middle\' fill=\'white\' font-family=\'Arial\'>U</text></svg>'">
              <div class="idea-user">
                <div class="idea-username">TradingExpert</div>
                <div class="idea-date">17 Mayıs 2025</div>
              </div>
            </div>
            <div class="idea-content">
              <h4>MSFT Breakout Yaklaşıyor</h4>
              <p>Microsoft 355$ direncine yaklaşıyor. Kırılması durumunda 380$ hedefli bir yükseliş beklenebilir.</p>
            </div>
            <div class="idea-chart">
              <canvas class="idea-mini-chart" data-symbol="MSFT"></canvas>
            </div>
            <div class="idea-stats">
              <span><i class="fas fa-thumbs-up"></i> 128</span>
              <span><i class="fas fa-comment"></i> 24</span>
              <span><i class="fas fa-share"></i> 12</span>
            </div>
          </div>
          
          <div class="idea-card">
            <div class="idea-header">
              <img src="img/avatar2.jpg" alt="User Avatar" class="idea-avatar" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 100 100\'><rect width=\'100\' height=\'100\' fill=\'%232962FF\'/><text x=\'50\' y=\'65\' font-size=\'50\' text-anchor=\'middle\' fill=\'white\' font-family=\'Arial\'>M</text></svg>'">
              <div class="idea-user">
                <div class="idea-username">MarketAnalyst</div>
                <div class="idea-date">16 Mayıs 2025</div>
              </div>
            </div>
            <div class="idea-content">
              <h4>S&P 500 Teknik Analiz</h4>
              <p>S&P 500 indeksi 5,850 seviyesindeki direnci test ediyor. Kısa vadeli göstergeler aşırı alım bölgesinde.</p>
            </div>
            <div class="idea-chart">
              <canvas class="idea-mini-chart" data-symbol="SPX"></canvas>
            </div>
            <div class="idea-stats">
              <span><i class="fas fa-thumbs-up"></i> 95</span>
              <span><i class="fas fa-comment"></i> 17</span>
              <span><i class="fas fa-share"></i> 8</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 4. Kripto Bölümü -->
      <div class="summary-section kripto-section" style="display: none;">
        <h3 class="section-title">Kripto Para Piyasası</h3>
        <div class="crypto-grid">
          <div class="crypto-card">
            <div class="crypto-header">
              <div class="crypto-logo">BTC</div>
              <div class="crypto-name">Bitcoin</div>
            </div>
            <div class="crypto-price">$48,235.67</div>
            <div class="crypto-change up">+1.82%</div>
            <div class="crypto-chart">
              <canvas class="mini-chart" data-symbol="BTC"></canvas>
            </div>
          </div>
          
          <div class="crypto-card">
            <div class="crypto-header">
              <div class="crypto-logo">ETH</div>
              <div class="crypto-name">Ethereum</div>
            </div>
            <div class="crypto-price">$3,452.18</div>
            <div class="crypto-change up">+2.34%</div>
            <div class="crypto-chart">
              <canvas class="mini-chart" data-symbol="ETH"></canvas>
            </div>
          </div>
          
          <div class="crypto-card">
            <div class="crypto-header">
              <div class="crypto-logo">BNB</div>
              <div class="crypto-name">Binance Coin</div>
            </div>
            <div class="crypto-price">$587.61</div>
            <div class="crypto-change down">-0.75%</div>
            <div class="crypto-chart">
              <canvas class="mini-chart" data-symbol="BNB"></canvas>
            </div>
          </div>
          
          <div class="crypto-card">
            <div class="crypto-header">
              <div class="crypto-logo">XRP</div>
              <div class="crypto-name">Ripple</div>
            </div>
            <div class="crypto-price">$0.6721</div>
            <div class="crypto-change up">+3.12%</div>
            <div class="crypto-chart">
              <canvas class="mini-chart" data-symbol="XRP"></canvas>
            </div>
          </div>
          
          <div class="crypto-card">
            <div class="crypto-header">
              <div class="crypto-logo">ADA</div>
              <div class="crypto-name">Cardano</div>
            </div>
            <div class="crypto-price">$0.4823</div>
            <div class="crypto-change up">+1.46%</div>
            <div class="crypto-chart">
              <canvas class="mini-chart" data-symbol="ADA"></canvas>
            </div>
          </div>
          
          <div class="crypto-card">
            <div class="crypto-header">
              <div class="crypto-logo">SOL</div>
              <div class="crypto-name">Solana</div>
            </div>
            <div class="crypto-price">$124.87</div>
            <div class="crypto-change down">-1.23%</div>
            <div class="crypto-chart">
              <canvas class="mini-chart" data-symbol="SOL"></canvas>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 5. ETF Bölümü -->
      <div class="summary-section etf-section" style="display: none;">
        <h3 class="section-title">ETF Piyasası</h3>
        <div class="etf-grid">
          <div class="etf-card">
            <div class="etf-header">
              <div class="etf-logo">SPY</div>
              <div class="etf-name">SPDR S&P 500 ETF</div>
            </div>
            <div class="etf-price">$584.42</div>
            <div class="etf-change up">+1.26%</div>
            <div class="etf-chart">
              <canvas class="mini-chart" data-symbol="SPY"></canvas>
            </div>
          </div>
          
          <div class="etf-card">
            <div class="etf-header">
              <div class="etf-logo">QQQ</div>
              <div class="etf-name">Invesco QQQ Trust</div>
            </div>
            <div class="etf-price">$426.68</div>
            <div class="etf-change up">+1.83%</div>
            <div class="etf-chart">
              <canvas class="mini-chart" data-symbol="QQQ"></canvas>
            </div>
          </div>
          
          <div class="etf-card">
            <div class="etf-header">
              <div class="etf-logo">VTI</div>
              <div class="etf-name">Vanguard Total Stock Market</div>
            </div>
            <div class="etf-price">$252.17</div>
            <div class="etf-change up">+0.92%</div>
            <div class="etf-chart">
              <canvas class="mini-chart" data-symbol="VTI"></canvas>
            </div>
          </div>
          
          <div class="etf-card">
            <div class="etf-header">
              <div class="etf-logo">ARKK</div>
              <div class="etf-name">ARK Innovation ETF</div>
            </div>
            <div class="etf-price">$47.89</div>
            <div class="etf-change down">-0.38%</div>
            <div class="etf-chart">
              <canvas class="mini-chart" data-symbol="ARKK"></canvas>
            </div>
          </div>
          
          <div class="etf-card">
            <div class="etf-header">
              <div class="etf-logo">GLD</div>
              <div class="etf-name">SPDR Gold Shares</div>
            </div>
            <div class="etf-price">$195.32</div>
            <div class="etf-change up">+0.65%</div>
            <div class="etf-chart">
              <canvas class="mini-chart" data-symbol="GLD"></canvas>
            </div>
          </div>
          
          <div class="etf-card">
            <div class="etf-header">
              <div class="etf-logo">IEMG</div>
              <div class="etf-name">iShares Core MSCI EM</div>
            </div>
            <div class="etf-price">$53.41</div>
            <div class="etf-change down">-0.24%</div>
            <div class="etf-chart">
              <canvas class="mini-chart" data-symbol="IEMG"></canvas>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Sağ Kenar Çubuğu - İzleme Listesi -->
    <aside id="rightSidebar" class="right-sidebar" style="position:fixed; top:60px; right:0; bottom:0; width:280px; background-color:#131722; border-left:1px solid #2a2e39; z-index:990; display:flex; flex-direction:column; overflow-y:auto; box-shadow:-5px 0 15px rgba(0,0,0,0.2); transform:translateX(100%); transition:transform 0.1s linear; will-change:transform; backface-visibility:hidden;">
      <div class="watchlist-container">
        <div class="watchlist-header">
          <h3 data-i18n="watchlist.title">İzleme Listesi</h3>
          <button class="add-btn" id="addWatchlistItem" title="Ekle"><i class="fas fa-plus"></i></button>
        </div>
        
        <div class="watchlist-filter">
          <input type="text" id="watchlistFilter" placeholder="Filtrele..." data-i18n-placeholder="watchlist.filter">
        </div>
        
        <ul class="watchlist" id="watchlistItems">
          <li>
            <div class="stock-info">
              <span class="stock-symbol">AAPL</span>
              <span class="stock-name">Apple Inc.</span>
            </div>
            <div class="stock-price">
              <span class="price-value">$210.35</span>
              <span class="price-change up">+2.15%</span>
            </div>
          </li>
          <li>
            <div class="stock-info">
              <span class="stock-symbol">MSFT</span>
              <span class="stock-name">Microsoft Corp.</span>
            </div>
            <div class="stock-price">
              <span class="price-value">$354.97</span>
              <span class="price-change up">+1.14%</span>
            </div>
          </li>
          <li>
            <div class="stock-info">
              <span class="stock-symbol">AMZN</span>
              <span class="stock-name">Amazon.com Inc.</span>
            </div>
            <div class="stock-price">
              <span class="price-value">$183.43</span>
              <span class="price-change down">-0.37%</span>
            </div>
          </li>
          <li>
            <div class="stock-info">
              <span class="stock-symbol">TSLA</span>
              <span class="stock-name">Tesla Inc.</span>
            </div>
            <div class="stock-price">
              <span class="price-value">$238.89</span>
              <span class="price-change up">+3.42%</span>
            </div>
          </li>
          <li>
            <div class="stock-info">
              <span class="stock-symbol">NVDA</span>
              <span class="stock-name">NVIDIA Corp.</span>
            </div>
            <div class="stock-price">
              <span class="price-value">$119.79</span>
              <span class="price-change up">+1.56%</span>
            </div>
          </li>
          <li>
            <div class="stock-info">
              <span class="stock-symbol">GOOGL</span>
              <span class="stock-name">Alphabet Inc.</span>
            </div>
            <div class="stock-price">
              <span class="price-value">$152.19</span>
              <span class="price-change down">-0.22%</span>
            </div>
          </li>
          <li>
            <div class="stock-info">
              <span class="stock-symbol">META</span>
              <span class="stock-name">Meta Platforms Inc.</span>
            </div>
            <div class="stock-price">
              <span class="price-value">$517.58</span>
              <span class="price-change up">+0.83%</span>
            </div>
          </li>
          <li>
            <div class="stock-info">
              <span class="stock-symbol">NFLX</span>
              <span class="stock-name">Netflix Inc.</span>
            </div>
            <div class="stock-price">
              <span class="price-value">$679.03</span>
              <span class="price-change up">+1.78%</span>
            </div>
          </li>
          <li>
            <div class="stock-info">
              <span class="stock-symbol">ADBE</span>
              <span class="stock-name">Adobe Inc.</span>
            </div>
            <div class="stock-price">
              <span class="price-value">$539.12</span>
              <span class="price-change up">+0.92%</span>
            </div>
          </li>
        </ul>
      </div>
    </aside>
    
    <!-- Sağ Sidebar Toggle Button - Daha Görünür ve Tıklanabilir -->
    <button id="rightToggleBtn" onclick="document.getElementById('rightSidebar').classList.toggle('visible'); this.style.right = document.getElementById('rightSidebar').classList.contains('visible') ? '280px' : '0'; this.querySelector('i').className = document.getElementById('rightSidebar').classList.contains('visible') ? 'fas fa-chevron-right' : 'fas fa-chevron-left'; this.querySelector('.toggle-text').textContent = document.getElementById('rightSidebar').classList.contains('visible') ? 'Gizle' : 'İzleme Listesi';" style="position:fixed; right:0; top:50%; z-index:9999; background-color:#2962FF; width:45px; height:110px; cursor:pointer !important; border:none; outline:none; border-radius:8px 0 0 8px; box-shadow:-4px 0 15px rgba(0,0,0,0.5); transform:translateY(-50%); display:flex; flex-direction:column; align-items:center; justify-content:center; padding:10px 0; transition:right 0.1s linear;">
      <i class="fas fa-chevron-left" style="color:white; font-size:26px; text-shadow:0 0 5px rgba(0,0,0,0.3);"></i>
      <span class="toggle-text" style="color:white; writing-mode:vertical-lr; transform:rotate(180deg); margin-top:15px; font-size:15px; font-weight:bold;">İzleme Listesi</span>
    </button>
  </main>
  
  <!-- Giriş Modalı -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 data-i18n="login.title">Giriş Yap</h2>
      <form id="loginForm">
        <div class="form-group">
          <label for="email" data-i18n="login.email">E-posta</label>
          <input type="email" id="email" name="email" required>
        </div>
        <div class="form-group">
          <label for="password" data-i18n="login.password">Şifre</label>
          <input type="password" id="password" name="password" required>
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary" data-i18n="login.submit">Giriş Yap</button>
          <a href="#" class="forgot-password" data-i18n="login.forgot">Şifremi Unuttum</a>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Ayarlar Modalı -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 data-i18n="settings.title">Ayarlar</h2>
      <div class="settings-container">
        <div class="settings-section">
          <h3 data-i18n="settings.appearance">Görünüm</h3>
          <div class="form-group">
            <label for="theme" data-i18n="settings.theme">Tema</label>
            <select id="theme">
              <option value="dark" data-i18n="settings.dark">Koyu</option>
              <option value="light" data-i18n="settings.light">Açık</option>
            </select>
          </div>
          <div class="form-group">
            <label for="chartType" data-i18n="settings.chartType">Grafik Tipi</label>
            <select id="chartType">
              <option value="candle" data-i18n="settings.candle">Mum</option>
              <option value="line" data-i18n="settings.line">Çizgi</option>
              <option value="bar" data-i18n="settings.bar">Çubuk</option>
              <option value="area" data-i18n="settings.area">Alan</option>
            </select>
          </div>
        </div>
        
        <div class="settings-section">
          <h3 data-i18n="settings.preferences">Tercihler</h3>
          <div class="form-group">
            <label for="language" data-i18n="settings.language">Dil</label>
            <select id="language">
              <option value="tr" data-i18n="settings.turkish">Türkçe</option>
              <option value="en" data-i18n="settings.english">İngilizce</option>
            </select>
          </div>
          <div class="form-group">
            <label for="defaultPage" data-i18n="settings.defaultPage">Varsayılan Sayfa</label>
            <select id="defaultPage">
              <option value="markets" data-i18n="settings.marketsPage">Piyasalar</option>
              <option value="watchlist" data-i18n="settings.watchlistPage">İzleme Listesi</option>
              <option value="chart" data-i18n="settings.chartPage">Grafik</option>
            </select>
          </div>
        </div>
        
        <div class="form-actions">
          <button type="button" id="applySettings" class="btn btn-primary" onclick="applyThemeSettings()">Ayarları Uygula</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Gösterge Ayarları Modalı (Her gösterge tipi için) -->
  <div id="indicatorSettingsModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 id="indicatorTitle">Gösterge Ayarları</h2>
      <form id="indicatorSettingsForm">
        <div id="indicatorParams" class="form-group">
          <!-- Gösterge parametreleri dinamik olarak eklenecek -->
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary">Uygula</button>
          <button type="button" id="removeIndicator" class="btn">Kaldır</button>
        </div>
      </form>
    </div>
  </div>
  
  <!-- Grafik Ayarları Modalı -->
  <div id="chartSettingsModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2 data-i18n="chartSettings.title">Grafik Ayarları</h2>
      <form id="chartSettingsForm">
        <div class="form-group">
          <label for="chartBackground" data-i18n="chartSettings.background">Grafik Arkaplanı</label>
          <input type="color" id="chartBackground" name="chartBackground" value="#131722">
        </div>
        <div class="form-group">
          <label for="gridLines" data-i18n="chartSettings.gridLines">Izgara Çizgileri</label>
          <select id="gridLines" name="gridLines">
            <option value="all" data-i18n="chartSettings.all">Hepsi</option>
            <option value="horizontal" data-i18n="chartSettings.horizontal">Yatay</option>
            <option value="vertical" data-i18n="chartSettings.vertical">Dikey</option>
            <option value="none" data-i18n="chartSettings.none">Hiçbiri</option>
          </select>
        </div>
        <div class="form-group">
          <label for="watermarkOpacity" data-i18n="chartSettings.watermark">Filigran Opaklığı</label>
          <input type="range" id="watermarkOpacity" name="watermarkOpacity" min="0" max="100" value="15">
        </div>
        <div class="form-actions">
          <button type="submit" class="btn btn-primary" data-i18n="chartSettings.apply">Uygula</button>
          <button type="button" id="resetSettings" class="btn" data-i18n="chartSettings.reset">Sıfırla</button>
        </div>
      </form>
    </div>
  </div>
  
  <script src="js/i18n.js"></script>
  <script src="js/api.js"></script>
  <script src="js/app.js"></script>
  
  <!-- Direkt Erişim Watchlist Toggle Script -->
  <script>
    // Sayfa tamamen yüklendiğinde en son çalışacak script
    window.addEventListener('load', function() {
      console.log('Sayfa yüklendi - Watchlist toggle hazırlanıyor');
      
      // Bir kerelik doğrudan erişim için elementleri seç
      const rightSidebar = document.getElementById('rightSidebar');
      const toggleBtn = document.getElementById('rightToggleBtn');
      
      if (!rightSidebar || !toggleBtn) {
        console.error('Elementler bulunamadı');
        return;
      }
      
      // DOM tamamen yüklendikten sonra ekstra stil ayarları
      function applyStyles() {
        // Watchlist görünümünü ayarla
        rightSidebar.style.transform = 'translateX(100%)';
        rightSidebar.classList.remove('visible');
        
        // CSS ile .visible sınıfını tanımla
        const style = document.createElement('style');
        style.textContent = `
          #rightSidebar.visible {
            transform: translateX(0) !important;
          }
        `;
        document.head.appendChild(style);
      }
      
      // Doğrudan stil uygulaması
      applyStyles();
      
      // Toggle fonksiyonu (test için)
      window.toggleSidebar = function() {
        rightSidebar.classList.toggle('visible');
        toggleBtn.style.right = rightSidebar.classList.contains('visible') ? '280px' : '0'; 
        toggleBtn.querySelector('i').className = rightSidebar.classList.contains('visible') ? 'fas fa-chevron-right' : 'fas fa-chevron-left';
        toggleBtn.querySelector('.toggle-text').textContent = rightSidebar.classList.contains('visible') ? 'Gizle' : 'İzleme Listesi';
        return 'Toggled sidebar: ' + (rightSidebar.classList.contains('visible') ? 'visible' : 'hidden');
      };
      
      // Doğrudan DOM elementlerini erişilebilir kıl
      window.rightSidebar = rightSidebar;
      window.toggleBtn = toggleBtn;
      
      // Yedek bir tıklama eventi ekle
      toggleBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        window.toggleSidebar();
      }, true);
      
      // Konsola test mesajı yaz
      console.log('%c✅ WatchList toggle hazır! Test etmek için toggleSidebar() fonksiyonunu çağırabilirsiniz', 'color:#4CAF50;font-weight:bold');
    });
  </script>
  
  <!-- Son Dokunuş Script - Tek Tıkla Çalışması İçin -->
  <script>
    // HTML tamamen yüklendikten hemen sonra çalışır
    document.addEventListener('DOMContentLoaded', function() {
      // Sayfa açıldığında doğrudan butonların tıklanabilir olduğundan emin ol
      function makeClickable() {
        // Tüm butonları tıklanabilir yap
        var allButtons = document.getElementsByTagName('button');
        for (var i = 0; i < allButtons.length; i++) {
          allButtons[i].style.pointerEvents = 'auto';
          allButtons[i].style.cursor = 'pointer';
        }
        
        // Özellikle toggle butonunu tıklanabilir yap
        var toggleBtn = document.getElementById('rightToggleBtn');
        if (toggleBtn) {
          toggleBtn.style.pointerEvents = 'auto';
          toggleBtn.style.cursor = 'pointer';
          
          // Ek tıklama olayı ekle
          toggleBtn.onclick = function(e) {
            // Tüm event propagation'ı engelle
            e.preventDefault();
            e.stopPropagation();
            e.stopImmediatePropagation();
            
            // Doğrudan DOM manipülasyonu
            var sidebar = document.getElementById('rightSidebar');
            if (sidebar) {
              sidebar.classList.toggle('visible');
              this.style.right = sidebar.classList.contains('visible') ? '280px' : '0';
              
              // İkon ve metin değiştir
              var icon = this.querySelector('i');
              var text = this.querySelector('.toggle-text');
              
              if (icon) icon.className = sidebar.classList.contains('visible') ? 'fas fa-chevron-right' : 'fas fa-chevron-left';
              if (text) text.textContent = sidebar.classList.contains('visible') ? 'Gizle' : 'İzleme Listesi';
            }
            
            // True döndür ki varsayılan davranışın engellendiğinden emin olalım
            return true;
          };
        }
      }
      
      // Hemen çalıştır
      makeClickable();
      
      // Biraz bekleyip tekrar çalıştır (tarayıcı gecikmelerine karşı)
      setTimeout(makeClickable, 100);
      setTimeout(makeClickable, 500);
    });
  </script>
</body>
</html> 